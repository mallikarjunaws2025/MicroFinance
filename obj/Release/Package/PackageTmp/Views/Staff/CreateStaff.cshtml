@model TestApp.VModels.NewStaff
@{
    ViewBag.Title = "CreateStaff";
    Layout = "~/Views/Shared/_LayoutPage.cshtml";
}
<!DOCTYPE html>
<html lang="en" >

<head>
  <meta charset="UTF-8">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js" type="text/javascript"></script>  
 <link rel='stylesheet prefetch' href='http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css'>
<link rel='stylesheet prefetch' href='http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css'>
<link rel='stylesheet prefetch' href='http://cdnjs.cloudflare.com/ajax/libs/jquery.bootstrapvalidator/0.5.0/css/bootstrapValidator.min.css'>
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<style>
    .drpdwn {
        width: 70px;
        height: 30px;
    }
</style>
<body>

      <div class="container" ;border-color: "darkgrey";border-width: "2px";>
           @Html.HiddenFor(model => model.DOB, new { @id = "DOB" })
           @Html.HiddenFor(model => model.DOJ, new { @id = "DOJ" })
@*<form class="well form-horizontal" action=" " method="post"  id="contact_form">*@
     @using (Html.BeginForm("CreateStaff", "Staff", FormMethod.Post, htmlAttributes: new { @class = "well form-horizontal" }))
     {
          <h3><label id="lblmgs"></label></h3>
                     @Html.ValidationSummary(false, "", new { @id = "Errors", @class = "text-danger" })
<fieldset>

<!-- Form Name -->
<legend><center><h2><b>Create New Staff </b></h2></center></legend><br>

<!-- Staff Name-->
<div class="form-group">
  <label class="col-md-4 control-label">Staff Name</label>  
  <div class="col-md-4 inputGroupContainer">
  <div class="input-group">
  <span class="input-group-addon"><i class="fa fa-wheelchair"></i></span>
      @Html.TextBoxFor(model => model.StaffName, new { @id = "StaffName", @class = "form-control", @placeholder = "Staff Name", @required = "required" })
    </div>
  </div>
</div>

        <div class="form-group">
  <label class="col-md-4 control-label">Staff Role</label>  
  <div class="col-md-4 inputGroupContainer">
  <div class="input-group">
  <span class="input-group-addon"><i class="fa fa-universal-access"></i></span>
      @Html.DropDownListFor(x => Model.RolePermission, new List<SelectListItem> { new SelectListItem { Value = "Admin", Text = "Admin" }, new SelectListItem { Value = "User", Text = "User" } }, "-- Select Role --", htmlAttributes: new { @class = "form-control", @required = "required", id = "RolePermission" })
    </div>
  </div>
</div>

<!-- DOB-->
<div class="form-group">
  <label class="col-md-4 control-label" >DOB</label> 
    <div class="col-md-4 inputGroupContainer">
    <div class="input-group">
  <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
         <input class = "form-control", required = "required" type="date" id="todatepickerDOB">
        @* @Html.DropDownListFor(x => Model.DOBD, Enumerable.Range(1, 31).Select(i => new SelectListItem { Value = i.ToString(), Text = i.ToString() }), "-Day-", htmlAttributes: new { @class = "drpdwn", id = "BDtDy" })&nbsp;
         @Html.DropDownListFor(x => Model.DOBM, Enumerable.Range(1, 12).Select(i => new SelectListItem { Value = i.ToString(), Text = i.ToString() }), "-Month-", htmlAttributes: new { @class = "drpdwn", id = "BDtMnth" })&nbsp;
         @Html.DropDownListFor(x => Model.DOBY, Enumerable.Range(1980, Convert.ToInt32(DateTime.Now.Year - 1980)).Select(i => new SelectListItem { Value = i.ToString(), Text = i.ToString() }), "-Year-", htmlAttributes: new { @class = "drpdwn", id = "BDtYr" })
    *@
    </div>
  </div>
</div>

    <!-- DOJ-->
<div class="form-group">
  <label class="col-md-4 control-label" >DOJ</label> 
    <div class="col-md-4 inputGroupContainer">
    <div class="input-group">
  <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
        <input  class = "form-control", required = "required" type="date" id="todatepickerDOJ">
        @* @Html.DropDownListFor(x => Model.DOJD, Enumerable.Range(1, 31).Select(i => new SelectListItem { Value = i.ToString(), Text = i.ToString() }), "-Day-", htmlAttributes: new { @class = "drpdwn", id = "JDtDy" })&nbsp;
         @Html.DropDownListFor(x => Model.DOJM, Enumerable.Range(1, 12).Select(i => new SelectListItem { Value = i.ToString(), Text = i.ToString() }), "-Month-", htmlAttributes: new { @class = "drpdwn", id = "JDtMnth" })&nbsp;
         @Html.DropDownListFor(x => Model.DOJY, Enumerable.Range(2015, Convert.ToInt32(DateTime.Now.Year - 2015) + 1).Select(i => new SelectListItem { Value = i.ToString(), Text = i.ToString() }), "-Year-", htmlAttributes: new { @class = "drpdwn", id = "JDtYr" })*@
    </div>
  </div>
</div>

    <!-- Staff Status-->
<div class="form-group">
  <label class="col-md-4 control-label">Staff Status</label>  
  <div class="col-md-4 inputGroupContainer">
  <div class="input-group">
  <span class="input-group-addon"><i class="fa fa-toggle-on"></i></span>
      @Html.DropDownListFor(model => model.Status, new List<SelectListItem> { new SelectListItem { Value = "Active", Text = "Active" }, new SelectListItem { Value = "Cancel", Text = "Cancel" } }, "-Select Status-", new { @id = "Status", @class = "form-control", @placeholder = "Staff Status", @required = "required" })
    </div>
  </div>
</div>

<!-- Contact No-->       
<div class="form-group">
  <label class="col-md-4 control-label">Contact No.</label>  
    <div class="col-md-4 inputGroupContainer">
    <div class="input-group">
        <span class="input-group-addon"><i class="glyphicon glyphicon-earphone"></i></span>
  @Html.TextBoxFor(model => model.CantactNum, new { @id = "CantactNum", @class = "form-control", @placeholder = "Contact No", @required = "required" })
    </div>
  </div>
</div>


<!-- Success message -->
<label class="alert alert-success" style="display:none" role="alert" id="success_message"> <i class="glyphicon glyphicon-thumbs-up"></i> Success!.</label>

<!-- Button -->
<div class="form-group">
  <label class="col-md-4 control-label"></label>
  <div class="col-md-4 inputGroupContainer">
      <button type="submit" style="float:left" id="btnSave" class="btn btn-warning" >SUBMIT <span class="glyphicon glyphicon-send"></span>&nbsp</button>
       <input type="button" value="Cancel" id="btnCancel" class="btn btn-warning" style="float:right" />
  </div>
</div>

</fieldset>
     }
@*</form>*@
</div>
   <!-- /.container -->
  <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
<script src='http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js'></script>
<script src='http://cdnjs.cloudflare.com/ajax/libs/bootstrap-validator/0.4.5/js/bootstrapvalidator.min.js'></script>
    <script  src="js/index.js"></script>
</body>
</html>
    <script>
        $("#btnCancel").click(function () {
            $("form")[0].reset(); //.attr("action", "/home/cancelform");
        });


        $("#todatepickerDOB").change(function () {
           
            if ($('#todatepickerDOB').val().length == 0) {
                //$("#lblmgs").html("<h3 style='color: red;'>Please select DOB.</h3>");
                return;
            }
            else {
                var today = new Date();
                var frmDt = new Date($('#todatepickerDOB').val());
                if (frmDt.getDate() > today.getDate() && frmDt.getMonth() >= today.getMonth() && frmDt.getFullYear() == today.getFullYear()) {
                    $("#lblmgs").html("<h3 style='color: red;'>Feture date is not allowed.</h3>");
                    return;
                }
                else {
                    $('#DOB').val(frmDt.toLocaleDateString());
                    $("#lblmgs").html('');
                }
            }
        });
        $("#todatepickerDOJ").change(function () {
            $("#lblmgs").html('');
        if ($('#todatepickerDOJ').val().length == 0) {
            //$("#lblmgs").html("<h3 style='color: red;'>Please select From date and To date.</h3>");
            return;
        }
        else {
            var today = new Date();
            var frmDt = new Date($('#todatepickerDOJ').val());
            if (frmDt.getDate() > today.getDate() && frmDt.getMonth() >= today.getMonth() && frmDt.getFullYear() == today.getFullYear()) {
                $("#lblmgs").html("<h3 style='color: red;'>Feture date is not allowed.</h3>");
                }
                else {
                $('#DOJ').val(frmDt.toLocaleDateString());
                $("#lblmgs").html('');
                }
        }
        });

        $(document).ready(function () {

            if ('@Model.IsSucess' == "1") {
            $("#lblmgs").html("<h5 style='color: green;'>Successfully created staff.</h5>");
            $("#btnSave").attr('disabled', true);
        }
        else if ('@Model.IsSucess' == "2") {
            $("#lblmgs").html("<h5 style='color: red;'>Failed to create staff, Please try again.</h5>");
        }
    });
</script>

